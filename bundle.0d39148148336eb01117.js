(()=>{"use strict";var e,t={6523:(e,t,s)=>{s.d(t,{A:()=>r});var n=s(31601),i=s.n(n),a=s(76314),o=s.n(a)()(i());o.push([e.id,"body {\n\tmargin: 0;\n\toverflow: hidden;\n\theight: 100vh;\n\twidth: 100vw;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-color: rgba(0, 0, 0, 0.8);\n}\n\ncanvas {\n\twidth: calc(100vw - 10px);\n\theight: calc(100vh - 10px);\n\tdisplay: block;\n\tborder: 1px solid black;\n\tborder-radius: 10px;\n}\n\n.green-color {\n\tcolor: greenyellow;\n}\n\n.red-color {\n\tcolor: red;\n}\n\n.yellow-color {\n\tcolor: yellow;\n}\n\n#toggle-debug-status {\n\tposition: absolute;\n\tbottom: 10px;\n\tleft: 10px;\n\tbackground: rgba(0, 0, 0, 0.8);\n\tcolor: #fff;\n\tfont-family: monospace;\n\tpadding: 10px;\n\tborder-radius: 6px;\n\tfont-size: 13px;\n\tline-height: 1.4;\n\tpointer-events: none;\n\tz-index: 9999;\n}\n",""]);const r=o},62596:(e,t,s)=>{var n=s(85072),i=s.n(n),a=s(97825),o=s.n(a),r=s(77659),l=s.n(r),c=s(55056),d=s.n(c),h=s(10540),_=s.n(h),u=s(41113),p=s.n(u),m=s(6523),g={};g.styleTagTransform=p(),g.setAttributes=d(),g.insert=l().bind(null,"head"),g.domAPI=o(),g.insertStyleElement=_(),i()(m.A,g),m.A&&m.A.locals&&m.A.locals;var v=s(42936);const P=class{constructor(){}};class I extends P{static getInstance(){return I._instance||(I._instance=new I),I._instance}constructor(){super(),this._currentScene=null}dispose(){this._currentScene&&(this._currentScene.disposeScene(),this._currentScene=null),qe.getInstance().engine.stopRenderLoop()}switchToScene(e){return t=this,s=void 0,i=function*(){this._currentScene&&this._currentScene.disposeScene(),this._currentScene=e,this._currentScene.loaded(),qe.getInstance().canvasElement.focus()},new((n=void 0)||(n=Promise))((function(e,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function r(e){try{l(i.throw(e))}catch(e){a(e)}}function l(t){var s;t.done?e(t.value):(s=t.value,s instanceof n?s:new n((function(e){e(s)}))).then(o,r)}l((i=i.apply(t,s||[])).next())}));var t,s,n,i}get currentSceneInstance(){return this._currentScene}}const M=I;s(96860);class b extends v.Z58{constructor(e){super(qe.getInstance().engine),this.metadata={sceneName:e.sceneName},this.preload(),this._createGlowLayer()}disposeScene(){this.debugLayer.hide(),this.dispose()}setActiveCamera(e){var t;e&&(this.activeCamera&&(this.activeCamera.dispose(),this.removeCamera(this.activeCamera)),super.activeCamera=e,null===(t=super.activeCamera)||void 0===t||t.attachControl(!0))}_createGlowLayer(){this._glowLayer=new v.VA("glow",this)}get sceneName(){return this.metadata.sceneName}get activeCamera(){return super.activeCamera}set activeCamera(e){super.activeCamera=e}}const T=b,C=class extends T{constructor(e){super(e)}};var y;!function(e){e.LOADING="LOADING_SCENE",e.LOGIN="LOGIN_SCENE",e.TEST_MAP="TEST_MAP_SCENE",e.GRASS_MAP="GRASS_MAP",e.STONE_MAP="STONE_MAP"}(y||(y={}));const A=y,x=class extends P{constructor(e){var t;super(),this._characterInstance=e.characterInstance,this._characterMesh=null!==(t=e.characterInstance.rootNode)&&void 0!==t?t:null}get characterInstance(){return this._characterInstance}},f=class extends x{constructor(e){super(e)}},N={IDLE:"Idle",WALKING:"Walking",RUNNING:"Running"},E=Object.values(N),w=N,R={IDLE:"Idle",WALKING:"Walking",RUNNING:"Running"},O=(Object.values(R),R),k=class extends f{constructor(e){super(e),this._currentlyPlayingAnimationGroups=[],this._lastMovementState="",this._characterInstance=e.characterInstance,this._playerMovementController=e.characterInstance.movementController,this._animationGroupsInstances=new Map,this._fillAnimationGroupsMap()}update(){this._playMovementAnimations(),this._moveAndRotateMesh()}dispose(){this._playerMovementController=null,this._animationGroupsInstances.clear(),this._currentlyPlayingAnimationGroups=[]}_fillAnimationGroupsMap(){const e=M.getInstance().currentSceneInstance,t=null==e?void 0:e.animationGroups;E.forEach((e=>{const s=null==t?void 0:t.find((t=>t.name===e));s&&this._animationGroupsInstances.set(e,s)}))}_playMovementAnimations(){var e;const t=null===(e=this._playerMovementController)||void 0===e?void 0:e.movementState;if(t&&t!==this._lastMovementState)switch(this._lastMovementState=t,t){case O.IDLE:this._playAnimation(w.IDLE);break;case O.WALKING:this._playAnimation(w.WALKING,{speedRatio:1.8});break;case O.RUNNING:this._playAnimation(w.RUNNING,{speedRatio:2});break;default:console.log(`AnimationController.ts | Unknown movement state '${t}'`),this._playAnimation(w.IDLE)}}_moveAndRotateMesh(){var e,t,s;if((null===(e=this._playerMovementController)||void 0===e?void 0:e.isMoving)&&this._characterInstance){const e=null===(t=this._playerMovementController)||void 0===t?void 0:t.movementDirection;if(e){const t=Math.atan2(e.x,e.z)+Math.PI,n=v.PTz.FromEulerAngles(0,t,0);this._characterMesh&&(this._characterMesh.rotationQuaternion?v.PTz.SlerpToRef(this._characterMesh.rotationQuaternion,n,.3,null===(s=this._characterMesh)||void 0===s?void 0:s.rotationQuaternion):this._characterMesh.rotationQuaternion=n.clone())}}}_playAnimation(e,t){const s=this._characterInstance.characterModelsController.bodyPartsModels;s&&Object.values(s).forEach((s=>{const n=null==s?void 0:s.animationGroups.find((t=>t.name===e));if(n){this._stopAllAnimations();const s=!1!==(null==t?void 0:t.playInLoop),i=(null==t?void 0:t.speedRatio)?null==t?void 0:t.speedRatio:1;n.enableBlending=!0,n.blendingSpeed=e===w.WALKING?.1:.2,n.start(s,i),n&&this._currentlyPlayingAnimationGroups.push(n)}}))}_stopAllAnimations(){console.log("stopallanimations");for(const e of this._currentlyPlayingAnimationGroups)e.stop();this._currentlyPlayingAnimationGroups=[]}},S=class extends x{constructor(e){var t;super(e),this._characterInstance=e.characterInstance,this._characterMesh=null!==(t=e.characterInstance.rootNode)&&void 0!==t?t:null}get characterInstance(){return this._characterInstance}},L=class{constructor(e,t=1){this.item=e,this.quantity=t}increase(e=1){this.quantity+=e}decrease(e=1){this.quantity=Math.max(this.quantity-e,0)}},K=class{constructor(){this._slots=[],this._capacity=30}addItem(e,t=1){if(e.stackable){const s=this._slots.find((t=>t.item.id===e.id));if(s)return s.increase(t),!0}return this._slots.length<this._capacity&&(this._slots.push(new L(e,t)),!0)}removeItem(e,t=1){const s=this._slots.find((t=>t.item.id===e));return!!s&&(s.decrease(t),s.quantity<=0&&(this._slots=this._slots.filter((e=>e!==s))),!0)}listItems(){return this._slots}hasItem(e,t=1){const s=this._slots.find((t=>t.item.id===e));return!!s&&s.quantity>=t}get capacity(){return this._capacity}get usedSlots(){return this._slots.length}},D=class extends S{constructor(e){super(e),this._inventory=new K}dispose(){}openInventoryUI(){console.log("Inventario:"),this._inventory.listItems().forEach(((e,t)=>{console.log(`Slot ${t+1}: ${e.item.name} x${e.quantity}`)}))}addItem(e,t=1){const s=this._inventory.addItem(e,t);return console.log(s?`+ ${t}x ${e.name}`:`No hay espacio para ${e.name}`),s}removeItem(e,t=1){const s=this._inventory.removeItem(e,t);return console.log(s?`- ${t}x ${e}`:`No tienes ${e}`),s}hasItem(e,t=1){return this._inventory.hasItem(e,t)}getSlots(){return this._inventory.listItems()}},B=class extends x{constructor(e){super(e),this._movementState=O.IDLE,this._movementDirection=v.Pq0.Zero(),this._currentSpeed=0,this._accelerationProgress=0,this._isMovingForward=!1,this._isMovingBackward=!1,this._isMovingLeft=!1,this._isMovingRight=!1,this._isMoving=!1,this._isRunning=!1,this._isRunningLocked=!1}};var G;!function(e){e.A="a",e.B="b",e.C="c",e.D="d",e.E="e",e.F="f",e.G="g",e.H="h",e.I="i",e.J="j",e.K="k",e.L="l",e.M="m",e.N="n",e.O="o",e.P="p",e.Q="q",e.R="r",e.S="s",e.T="t",e.U="u",e.V="v",e.W="w",e.X="x",e.Y="y",e.Z="z",e.ZERO="0",e.ONE="1",e.TWO="2",e.THREE="3",e.FOUR="4",e.FIVE="5",e.SIX="6",e.SEVEN="7",e.EIGHT="8",e.NINE="9",e.PLUS="+",e.MINUS="-",e.ARROW_UP="arrowup",e.ARROW_DOWN="arrowdown",e.ARROW_LEFT="arrowleft",e.ARROW_LIGHT="arrowright",e.BLOCK_MAYUS="capslock",e.SHIFT="shift",e.SPACE=" "}(G||(G={}));const H=G,q=class extends B{constructor(e){var t;super(e),this._kbInputController=null,this._camera=null,this._characterInstance=e.characterInstance,this._characterMesh=null!==(t=e.characterInstance.rootNode)&&void 0!==t?t:null,this._setKeyboardInputController(),this._setCamera(),this._addGlowSwitch(),this._addRunningSwitch()}update(){this._setMovingVariables(),this._calculateMoveDirection(),this._calculateSpeedAndMoveCharacter(),this._setMovementState(),this._debugInputs()}dispose(){this._kbInputController=null,this._camera=null}_setKeyboardInputController(){this._kbInputController=this._characterInstance.keyboardInputController}_setCamera(){const e=M.getInstance().currentSceneInstance;(null==e?void 0:e.activeCamera)&&(this._camera=null==e?void 0:e.activeCamera)}_setMovingVariables(){var e,t,s,n,i,a,o,r,l,c;this._isMovingForward=null!==(t=null===(e=this._kbInputController)||void 0===e?void 0:e.isKeyPressed(H.W))&&void 0!==t&&t,this._isMovingBackward=null!==(n=null===(s=this._kbInputController)||void 0===s?void 0:s.isKeyPressed(H.S))&&void 0!==n&&n,this._isMovingLeft=null!==(a=null===(i=this._kbInputController)||void 0===i?void 0:i.isKeyPressed(H.A))&&void 0!==a&&a,this._isMovingRight=null!==(r=null===(o=this._kbInputController)||void 0===o?void 0:o.isKeyPressed(H.D))&&void 0!==r&&r,this._isMoving=this._isMovingForward||this._isMovingBackward||this._isMovingLeft||this._isMovingRight,this._isRunning=null!==(c=null===(l=this._kbInputController)||void 0===l?void 0:l.isKeyPressed(H.SHIFT))&&void 0!==c&&c}_calculateMoveDirection(){var e;if(this._isMoving){const t=null===(e=this._camera)||void 0===e?void 0:e.getForwardRay().direction,s=new v.Pq0(null==t?void 0:t.x,0,null==t?void 0:t.z).normalize(),n=v.Pq0.Cross(s,v.Pq0.Up()).normalize();this._isMovingForward&&(this._movementDirection=this._movementDirection.add(s)),this._isMovingBackward&&(this._movementDirection=this._movementDirection.subtract(s)),this._isMovingLeft&&(this._movementDirection=this._movementDirection.add(n)),this._isMovingRight&&(this._movementDirection=this._movementDirection.subtract(n)),this._movementDirection.normalize()}else this._movementDirection=v.Pq0.Zero()}_calculateSpeedAndMoveCharacter(){var e;if(this._isMoving){let t=this._characterInstance.walkSpeed,s=this._characterInstance.walkAcceleration;(this._isRunning||this._isRunningLocked)&&(t=this._characterInstance.runSpeed,s=this._characterInstance.runAcceleration),this._accelerationProgress+=s,this._accelerationProgress>1&&(this._accelerationProgress=1);const n=Math.pow(this._accelerationProgress,2);this._currentSpeed=n*t;const i=this._movementDirection.scale(this._currentSpeed);null===(e=this._characterMesh)||void 0===e||e.moveWithCollisions(i)}else this._currentSpeed=0,this._accelerationProgress=0}_setMovementState(){this._isMoving?(this._movementState=O.WALKING,(this._isRunning||this._isRunningLocked)&&(this._movementState=O.RUNNING)):this._movementState=O.IDLE}_debugInputs(){var e,t;null===(e=this._kbInputController)||void 0===e||e.addKeyAction(H.PLUS,{onKeyPressed:()=>{this._characterInstance.addHP(1e4)}}),null===(t=this._kbInputController)||void 0===t||t.addKeyAction(H.MINUS,{onKeyPressed:()=>{this._characterInstance.decreaseHP(1e4)}})}_addGlowSwitch(){var e;null===(e=this._kbInputController)||void 0===e||e.addToggleKey(H.G,{onSwitchON:()=>this._characterInstance.addGlow(),onSwitchOFF:()=>this._characterInstance.removeGlow()},"Glow")}_addRunningSwitch(){var e;null===(e=this._kbInputController)||void 0===e||e.addToggleKey(H.BLOCK_MAYUS,{onSwitchON:()=>{this._isRunningLocked=!0},onSwitchOFF:()=>{this._isRunningLocked=!1}},"Running")}get isMoving(){return this._isMoving}get movementState(){return this._movementState}get movementDirection(){return this._movementDirection}};var F,V=s(17159);!function(e){e.MAIN_BAR="MainBar",e.CHARACTER_NAME="CharacterName",e.INVENTORY_PANEL="InventoryPanel",e.WARP_MAPS_PANEL="WarpMapsPanel",e.PLAYER_HP_INDICATOR="PlayerHPIndicator",e.TOOLTIP="ToolTip",e.LIST="-List",e.MAIN_CONTENT_CONTAINER="-MainContentContainer",e.DRAGGABLE_CONTROL="-DragControl",e.CLOSE_BUTTON="-CloseButton",e.STACK_PANEL="-StackPanel",e.TEXT="-Text",e.TITLE="-Title"}(F||(F={}));const z=F;class U extends V.tN{constructor(e){super(e.elementName),this.onResizeObservable=new v.cPK,this._prevWidth=0,this._prevHeight=0,this._elementName=e.elementName}_processMeasures(e,t){super._processMeasures(e,t);const s=this._currentMeasure,n=s.width,i=s.height;n===this._prevWidth&&i===this._prevHeight||(this._prevWidth=n,this._prevHeight=i,this.onResizeObservable.notifyObservers({width:n,height:i}))}get elementName(){return this._elementName}}const W=U;var Y;!function(e){e.DEFAULT="default",e.POINTER="pointer",e.MOVE="move",e.NOT_ALLOWED="not-allowed",e.GRAB="grab"}(Y||(Y={}));const $=Y,j=class extends W{constructor(e){super(e),this._isDragging=!1,this._pointerPositionWhenStartDragging=new v.I9Y,this._dragControlArea=new V.tN(`${this.elementName}${z.DRAGGABLE_CONTROL}`),this._configureDragControlArea(e.dragControlAreaPercentage),this._initializeDragEvents()}_configureDragControlArea(e){this._setupDragControlResizeEvent(e),this._setupDragControlAreaMousePointer(),this._setupDragControlAreaAlignments(),this.addControl(this._dragControlArea)}_setupDragControlResizeEvent(e){this.onResizeObservable.add((({width:t,height:s})=>{const n=e?e.horizontalPercentage:100,i=e?e.verticalPercentage:100;this._dragControlArea.widthInPixels=t*(n/100),this._dragControlArea.heightInPixels=s*(i/100)}))}_setupDragControlAreaMousePointer(){this._dragControlArea.onPointerEnterObservable.add((()=>{document.body.style.cursor=$.GRAB})),this._dragControlArea.onPointerOutObservable.add((()=>{document.body.style.cursor=$.DEFAULT}))}_setupDragControlAreaAlignments(){this._dragControlArea.horizontalAlignment=V.Ec.HORIZONTAL_ALIGNMENT_LEFT,this._dragControlArea.verticalAlignment=V.Ec.VERTICAL_ALIGNMENT_TOP}_initializeDragEvents(){this._initializeDragPointerDownEvent(),this._initializeDragPointerUpEvent(),this._initializeDragPointerMoveEvent()}_initializeDragPointerDownEvent(){const e=M.getInstance().currentSceneInstance;this._dragControlArea.onPointerDownObservable.add((t=>{this._isDragging=!0,this._pointerPositionWhenStartDragging.x=t.x-this.leftInPixels,this._pointerPositionWhenStartDragging.y=t.y-this.topInPixels,null==e||e.activeCamera.turnOffMovementControls()}))}_initializeDragPointerUpEvent(){const e=M.getInstance().currentSceneInstance;this._dragControlArea.onPointerUpObservable.add((()=>{this._isDragging=!1,null==e||e.activeCamera.turnOnMovementControls()}))}_initializeDragPointerMoveEvent(){const e=M.getInstance().currentSceneInstance;null==e||e.onPointerObservable.add((e=>{if(!this._isDragging||e.type!==v.Zph.POINTERMOVE)return;const t=qe.getInstance().canvasElement.getBoundingClientRect();this.leftInPixels=e.event.clientX-t.left-this._pointerPositionWhenStartDragging.x,this.topInPixels=e.event.clientY-t.top-this._pointerPositionWhenStartDragging.y}))}};class Z{static initialize(e){this._initialized||(this._guiLayer=e,this._createToolTipContainer(),this._createToolTipText(),this._addToolTipToGUILayer(),this._initialized=!0,this._addToolTipMouseMoveEvent())}static attach(e,t){e.onPointerEnterObservable.add((()=>{if(this._initialized){const e=6.5;this._toolTipText.text=t,this._toolTipText.widthInPixels=e*t.length,this._toolTipContainer.isVisible=!0}})),e.onPointerOutObservable.add((()=>{this._initialized&&(this._toolTipContainer.isVisible=!1)}))}static hide(){this._toolTipContainer.isVisible=!1}static _createToolTipContainer(){this._toolTipContainer=new V.tN(z.TOOLTIP),this._toolTipContainer.isVisible=!1,this._toolTipContainer.background="black",this._toolTipContainer.thickness=0,this._toolTipContainer.alpha=.85,this._toolTipContainer.cornerRadius=6,this._toolTipContainer.zIndex=1e3,this._toolTipContainer.horizontalAlignment=V.Ec.HORIZONTAL_ALIGNMENT_LEFT,this._toolTipContainer.verticalAlignment=V.Ec.VERTICAL_ALIGNMENT_TOP,this._toolTipContainer.adaptWidthToChildren=!0,this._toolTipContainer.adaptHeightToChildren=!0}static _createToolTipText(){this._toolTipText=new V.VJ(`${z.TOOLTIP}${z.TEXT}`,""),this._toolTipText.color="white",this._toolTipText.fontSize=13,this._toolTipText.textWrapping=!0,this._toolTipText.resizeToFit=!0,this._toolTipText.horizontalAlignment=V.Ec.HORIZONTAL_ALIGNMENT_CENTER,this._toolTipText.verticalAlignment=V.Ec.VERTICAL_ALIGNMENT_CENTER,this._toolTipText.paddingTopInPixels=10,this._toolTipText.paddingBottomInPixels=10}static _addToolTipToGUILayer(){this._toolTipContainer.addControl(this._toolTipText),this._guiLayer.addControl(this._toolTipContainer)}static _addToolTipMouseMoveEvent(){const e=qe.getInstance().canvasElement,t=e.getBoundingClientRect();e.addEventListener("mousemove",(e=>{this._pointerX=e.clientX,this._pointerY=e.clientY,this._toolTipContainer.isVisible&&(this._toolTipContainer.leftInPixels=this._pointerX-t.left+10,this._toolTipContainer.topInPixels=this._pointerY-t.top+10)}))}}Z._initialized=!1,Z._pointerX=0,Z._pointerY=0;const X=Z,J="#121111ff";class Q extends V.$n{constructor(e){super(e.elementName),this._elementName=e.elementName,this._enabled=!0!==e.enabled&&!1!==e.enabled||e.enabled,this._onHoverCursor=e.onHoverCursor,this._onClickHandler=e.onClick,this._onHoverHandler=e.onHover,this._onPointerOutHandler=e.onPointerOut,this._setupButtonTextElement(e.buttonText),this._setupToolTipElement(e.toolTipText),this._setupButtonHoverPointer(),this._setupOnClickHandler(),this._setupLookAndFeel()}_setupLookAndFeel(){this.heightInPixels=22,this.fontSize="13px",this.color=this._enabled?"white":"#545454ff",this.background=J,this.cornerRadius=5}_setupButtonTextElement(e=""){this._textElement=new V.VJ(`${this.elementName}${z.TEXT}`),this._textElement.text=e,this._textElement.textHorizontalAlignment=V.Ec.HORIZONTAL_ALIGNMENT_CENTER,this._textElement.textVerticalAlignment=V.Ec.VERTICAL_ALIGNMENT_CENTER,this.addControl(this._textElement)}_setupToolTipElement(e){e&&X.attach(this,e)}_setupButtonHoverPointer(){this.onPointerEnterObservable.add((()=>{var e;document.body.style.cursor=this._enabled?null!==(e=this._onHoverCursor)&&void 0!==e?e:$.DEFAULT:$.NOT_ALLOWED,this._enabled&&this._onHoverHandler&&(this.background="#353434ff",this._onHoverHandler())})),this.onPointerOutObservable.add((()=>{document.body.style.cursor=$.DEFAULT,this._enabled&&this._onPointerOutHandler&&(this.background=J,this._onPointerOutHandler())})),this.onDisposeObservable.add((()=>{document.body.style.cursor=$.DEFAULT}))}_localClickHandler(){this._enabled&&this._onClickHandler&&this._onClickHandler()}_setupOnClickHandler(){this.isHitTestVisible=!0,this.onPointerUpObservable.add(this._localClickHandler.bind(this))}get elementName(){return this._elementName}get enabled(){return this._enabled}get text(){return this._textElement}set fontSize(e){this._textElement.fontSize=e}}const ee=Q,te=class extends ee{constructor(e){super(Object.assign(Object.assign({},e),{buttonText:"✕",onHoverCursor:$.POINTER})),this._setupLookAndFeel_ext()}_setupLookAndFeel_ext(){this.text.fontSize=13,this.widthInPixels=20,this.heightInPixels=20,this.color="white",this.background="#AA0000",this.cornerRadius=5}};class se extends j{constructor(e){var t;super(Object.assign(Object.assign({},e),{dragControlAreaPercentage:{horizontalPercentage:86,verticalPercentage:5}})),this._titleElement=null,this._mainContentContainer=new V.mc(`${this.elementName}${z.MAIN_CONTENT_CONTAINER}`),se._panelInstances.push(this),this._titleText=null!==(t=e.title)&&void 0!==t?t:"",this._addTitle(),this._setZIndex(),this._setAlignments(),this._setCornerRadius(),this._setSize(),this._setDefaultPosition(),this._setupLookAndFeel(),this._setPanelOverlapBehaviour(),this._addCloseButton(e.closePanel),this._createMainContentContainer()}_addToPanelContentContainer(e){this._mainContentContainer.addControl(e)}_addTitle(){var e;(e=>"string"==typeof e)(e=this._titleText)&&""===e.trim()||(this._titleElement=new V.VJ(`${this.elementName}${z.TITLE}`,this._titleText),this._titleElement.color="white",this._titleElement.fontSizeInPixels=16,this._dragControlArea.addControl(this._titleElement))}_setZIndex(){this.zIndex=1}_setAlignments(){this.verticalAlignment=V.Ec.VERTICAL_ALIGNMENT_TOP,this.horizontalAlignment=V.Ec.HORIZONTAL_ALIGNMENT_LEFT}_setCornerRadius(){this.cornerRadius=10}_setPanelOverlapBehaviour(){this.onPointerDownObservable.add((()=>{this._bringThisPanelToFront()}))}_addCloseButton(e){this._closeButton=new te({elementName:`${this.elementName}${z.CLOSE_BUTTON}`,onClick:e}),this._closeButton.horizontalAlignment=V.Ec.HORIZONTAL_ALIGNMENT_RIGHT,this._closeButton.verticalAlignment=V.Ec.VERTICAL_ALIGNMENT_TOP,this._closeButton.leftInPixels=-7,this._closeButton.topInPixels=6,this.addControl(this._closeButton)}_createMainContentContainer(){this.onResizeObservable.add((({height:e})=>{const t=1.2*this._dragControlArea.heightInPixels;this._mainContentContainer.verticalAlignment=V.Ec.VERTICAL_ALIGNMENT_TOP,this._mainContentContainer.heightInPixels=e-t,this._mainContentContainer.topInPixels=t,this.addControl(this._mainContentContainer)}))}_bringThisPanelToFront(){const e=Math.max(...se._panelInstances.map((e=>{var t;return null!==(t=e.zIndex)&&void 0!==t?t:0})));this.zIndex=e+1}}se._panelInstances=[];const ne=se,ie=class extends ne{constructor(e){super({elementName:z.INVENTORY_PANEL,closePanel:()=>{var e;null===(e=this._characterInstance.keyboardInputController)||void 0===e||e.simulateToggleKeyPressed(H.V)},title:`Inventory [${e.characterInstance.name}]`}),this._characterInstance=e.characterInstance}_setDefaultPosition(){const e=qe.getInstance().canvasElement;this.leftInPixels=e.width-this.widthInPixels-.01*e.width,this.topInPixels=e.height/2-this.heightInPixels/2}_setSize(){const e=qe.getInstance().canvasElement;this.widthInPixels=.27*e.width,this.heightInPixels=.8*e.height}_setupLookAndFeel(){this.background="black"}get characterInstance(){return this._characterInstance}},ae=class extends ee{constructor(e){super(Object.assign(Object.assign({},e),{onHoverCursor:$.POINTER,onClick:()=>{e.unmetRequirements||e.onClick()}})),this._unmetRequirements=!0,this._unmetRequirements=e.unmetRequirements,this._setColorByUnmetRequirements()}_setColorByUnmetRequirements(){this.enabled&&this._unmetRequirements&&(this.color="#950000ff")}};class oe extends V.Pc{constructor(e){super(e.elementName),this._elementName=e.elementName}get elementName(){return this._elementName}}const re=oe,le=class extends re{constructor(e){super(e)}};class ce extends V.oE{constructor(e){super(e.elementName),this._elementName=e.elementName}get elementName(){return this._elementName}}const de=ce,he=class extends de{constructor(e){super(e),this._createStackPanel(),this._configure(),this._configureStackPanel()}clear(){this._stackPanel.clearControls()}_addItem(e){this._stackPanel.addControl(e)}_createStackPanel(){this._stackPanel=new le({elementName:`${this.elementName}${z.STACK_PANEL}`})}_configure(){this.thickness=0,this.barSize=10}_configureStackPanel(){this._stackPanel.horizontalAlignment=V.Ec.HORIZONTAL_ALIGNMENT_LEFT,this._stackPanel.isVertical=!0,this._stackPanel.spacing=5,this._stackPanel.width=1,this._stackPanel.paddingLeftInPixels=5,this._stackPanel.paddingRightInPixels=5,this._stackPanel.paddingBottom=5,this.addControl(this._stackPanel)}},_e=class extends he{constructor(){super({elementName:`${z.WARP_MAPS_PANEL}${z.LIST}`})}addMapToList(e){this._addItem(e)}},ue=class extends T{constructor(e){super(e)}},pe=class extends ue{constructor(){super({sceneName:A.STONE_MAP}),this._playerCharacter=null}preload(){console.log('StoneMapScene.ts | "preload" method execution'),this._createTempCamera()}loaded(){console.log('StoneMapScene.ts | "loaded" method execution'),this._createStoneMapSceneContent()}update(){var e;null===(e=this._playerCharacter)||void 0===e||e.update()}_createStoneMapSceneContent(){new v.g4z("light",new v.Pq0(0,1,0),this);const e=v.PeD.CreateGround("ground",{width:600,height:600},this),t=new v.FUi("groundMat",this);t.diffuseTexture=new v.gPd("assets/textures/stone.jpg",this),t.diffuseTexture.uScale=150,t.diffuseTexture.vScale=150,e.material=t,this._playerCharacter=new Ke({characterName:"KriZ",currentHP:75e4,maxHP:999999,currentMP:85e4,maxMP:999999})}_createTempCamera(){const e=new v.SCQ("tempCamera",new v.Pq0(0,5,-10),this);e.setTarget(v.Pq0.Zero()),this.setActiveCamera(e)}},me=[{mapId:"GRASS_MAP",displayName:"Grass",enabled:!0,levelRequired:1,goldRequired:100},{mapId:"STONE_MAP",displayName:"Stone",enabled:!0,levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_1",displayName:"Mock Map 1",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_2",displayName:"Mock Map 2",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_3",displayName:"Mock Map 3",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_4",displayName:"Mock Map 4",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_5",displayName:"Mock Map 5",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_6",displayName:"Mock Map 6",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_7",displayName:"Mock Map 7",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_8",displayName:"Mock Map 8",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_9",displayName:"Mock Map 9",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_10",displayName:"Mock Map 10",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_1",displayName:"Mock Map 1",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_2",displayName:"Mock Map 2",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_3",displayName:"Mock Map 3",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_4",displayName:"Mock Map 4",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_5",displayName:"Mock Map 5",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_6",displayName:"Mock Map 6",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_7",displayName:"Mock Map 7",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_8",displayName:"Mock Map 8",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_9",displayName:"Mock Map 9",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_10",displayName:"Mock Map 10",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_1",displayName:"Mock Map 1",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_2",displayName:"Mock Map 2",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_3",displayName:"Mock Map 3",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_4",displayName:"Mock Map 4",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_5",displayName:"Mock Map 5",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_6",displayName:"Mock Map 6",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_7",displayName:"Mock Map 7",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_8",displayName:"Mock Map 8",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_9",displayName:"Mock Map 9",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750},{mapId:"MOCK_MAP_10",displayName:"Mock Map 10",enabled:!1,disabledReason:"This location will be available next season.",levelRequired:10,goldRequired:750}],ge=class extends ne{constructor(e){super({elementName:z.WARP_MAPS_PANEL,closePanel:()=>{var e;null===(e=this._characterInstance.keyboardInputController)||void 0===e||e.simulateToggleKeyPressed(H.M)},title:"Warp Maps List"}),this._characterInstance=e.characterInstance,this._mapsList=new _e,this._configureMapList(),this._addAllMapsOptions(),this._mainContentContainer.addControl(this._mapsList)}_setDefaultPosition(){const e=qe.getInstance().canvasElement;this.leftInPixels=.01*e.width,this.topInPixels=e.height/2-this.heightInPixels/2}_setSize(){const e=qe.getInstance().canvasElement;this.widthInPixels=.27*e.width,this.heightInPixels=.8*e.height}_setupLookAndFeel(){this.background="black"}_configureMapList(){}_addAllMapsOptions(){for(let e=0;me.length>e;e++){const t=me[e],s=this._characterInstance.level<t.levelRequired,n=new ae({elementName:t.mapId,buttonText:t.displayName,toolTipText:t.disabledReason?t.disabledReason:s?"You do not meet the requirements to move to this location.":void 0,enabled:t.enabled,unmetRequirements:s,onClick:()=>{switch(t.mapId){case"GRASS_MAP":M.getInstance().switchToScene(new De);break;case"STONE_MAP":M.getInstance().switchToScene(new pe)}}});this._mapsList.addMapToList(n)}}get characterInstance(){return this._characterInstance}};class ve extends V.mc{constructor(e){super(e.elementName),this._elementName=e.elementName}get elementName(){return this._elementName}}const Pe=ve,Ie=V.Ec.HORIZONTAL_ALIGNMENT_LEFT,Me=V.Ec.VERTICAL_ALIGNMENT_TOP;class be extends Pe{constructor(e){super({elementName:z.PLAYER_HP_INDICATOR}),this._healthPointsPercent=0,this._playerInstance=e.characterInstance,this._configureIndicator(),this._createBackgroundCircle(),this._createFillCircle(),this._createBorderCircle(),this._createHPValuesText(),this.update()}update(){this._updateHealthPointsPercent(),this._updateFillCircle(),this._updateHealthPointsTextValues()}_configureIndicator(){this.width="110px",this.height="110px",this.horizontalAlignment=Ie,this.verticalAlignment=Me}_createBackgroundCircle(){this._backgroundCircle=new V.Pp("Background"),this._backgroundCircle.width="100%",this._backgroundCircle.height="100%",this._backgroundCircle.color="",this._backgroundCircle.thickness=0,this._backgroundCircle.background="gray",this.addControl(this._backgroundCircle)}_createFillCircle(){this._fillContainer=new V.tN("Fill container"),this._fillContainer.width="100px",this._fillContainer.height="100px",this._fillContainer.clipChildren=!0,this._fillContainer.thickness=0,this._fillCircle=new V.Pp("Fill red"),this._fillCircle.width="100px",this._fillCircle.height="100px",this._fillCircle.color="",this._fillCircle.thickness=0,this._fillCircle.background="red",this._fillContainer.addControl(this._fillCircle),this.addControl(this._fillContainer)}_createBorderCircle(){this._borderCircle=new V.Pp("Border"),this._borderCircle.width="100%",this._borderCircle.height="100%",this._borderCircle.color="black",this._borderCircle.thickness=5,this._borderCircle.background="",this.addControl(this._borderCircle)}_createHPValuesText(){this._hpValuesText=new V.VJ("HP Text"),this._hpValuesText.color="white",this._hpValuesText.fontSize="13px",this._hpValuesText.fontFamily="Arial",this._hpValuesText.textHorizontalAlignment=V.Ec.HORIZONTAL_ALIGNMENT_CENTER,this._hpValuesText.textVerticalAlignment=V.Ec.VERTICAL_ALIGNMENT_CENTER,this._hpValuesText.shadowColor="black",this._hpValuesText.shadowOffsetX=1,this._hpValuesText.shadowOffsetY=1,this._hpValuesText.shadowBlur=3,this._hpValuesText.outlineWidth=3,this._hpValuesText.outlineColor="black",this.addControl(this._hpValuesText)}_updateHealthPointsPercent(){const e=this._playerInstance.currentHP,t=this._playerInstance.maxHP;this._healthPointsPercent=Math.trunc(100*e/t)}_updateFillCircle(){this._fillContainer.height=`${this._healthPointsPercent}%`;const e=Math.trunc((100-this._healthPointsPercent)/2);this._fillContainer.top=`${e}px`,this._fillCircle.top=`-${e>0?e-1:e}px`}_updateHealthPointsTextValues(){this._hpValuesText.text=`${this._playerInstance.currentHP}/${this._playerInstance.maxHP}`}get characterInstance(){return this._playerInstance}}const Te=class extends Pe{constructor(e){super(e)}},Ce=class extends Te{constructor(e){super({elementName:z.MAIN_BAR}),this._characterInstance=e.characterInstance,this.width="75%",this.height="15%",this.verticalAlignment=V.Ec.VERTICAL_ALIGNMENT_BOTTOM,this._createPlayerHPIndicator()}update(){this._playerHPIndicator.update()}_createPlayerHPIndicator(){this._playerHPIndicator=new be({characterInstance:this._characterInstance}),this.addControl(this._playerHPIndicator)}get characterInstance(){return this._characterInstance}},ye=class extends S{constructor(e){super(e),this._kbInputController=null,this._mainNavbarInstance=null,this._isInventoryMainPanelOpen=!1,this._inventoryMainPanelInstance=null,this._isWarpMapsMainPanelOpen=!1,this._warpMapsMainPanelInstance=null,this._guiTexture=this._createGUITextureInstance(),this._kbInputController=this._characterInstance.keyboardInputController,this._addToggleKeys(),this._createMainNavBar(),this._createInventoryMainPanel(),this._createWarpMapsMainPanel(),this._addElementToGUITexture((()=>{const e=new V.tN("InfoBox");e.widthInPixels=270,e.heightInPixels=190,e.cornerRadius=10,e.color="white",e.thickness=1,e.background="#000000AA",e.horizontalAlignment=V.Ec.HORIZONTAL_ALIGNMENT_LEFT,e.verticalAlignment=V.Ec.VERTICAL_ALIGNMENT_TOP,e.paddingTopInPixels=5,e.paddingLeftInPixels=5;const t=new V.mc("Panel"),s=new V.mc("TitleContainer"),n=new V.VJ("Titulo");n.text="Controls",n.fontSize=18,n.textHorizontalAlignment=V.Ec.HORIZONTAL_ALIGNMENT_CENTER,n.textVerticalAlignment=V.Ec.VERTICAL_ALIGNMENT_TOP,n.paddingTopInPixels=8;const i=V.$n.CreateSimpleButton("close","✕");i.width="30px",i.height="30px",i.color="white",i.background="#AA0000",i.cornerRadius=5,i.horizontalAlignment=V.Ec.HORIZONTAL_ALIGNMENT_RIGHT,i.verticalAlignment=V.Ec.VERTICAL_ALIGNMENT_TOP,i.paddingTop="5px",i.paddingRight="5px",i.onPointerUpObservable.add((()=>{e.isVisible=!1})),i.isHitTestVisible=!0,i.onPointerEnterObservable.add((()=>{document.body.style.cursor=$.POINTER})),i.onPointerOutObservable.add((()=>{document.body.style.cursor=$.DEFAULT}));const a=new V.mc("TextContainer"),o=new V.VJ("Texto");return o.text="\n• [W-A-S-D] Movement\n• [Hold mouse left-click] Rotate camera\n• [Mouse scroll] Zoom\n• [Shift] Run\n• [Caps Lock] Run lock/unlock\n• [G] Glow \n• [1-5] Equip/remove armor\n • [-] Decrease HP\n • [+] Add HP",o.color="white",o.fontSize=13,o.textHorizontalAlignment=V.Ec.HORIZONTAL_ALIGNMENT_LEFT,o.textVerticalAlignment=V.Ec.VERTICAL_ALIGNMENT_CENTER,o.paddingLeftInPixels=10,o.paddingTopInPixels=10,o.textWrapping=!0,s.addControl(n),a.addControl(o),t.addControl(a),e.addControl(t),s.addControl(i),t.addControl(s),e})())}update(){var e;null===(e=this._mainNavbarInstance)||void 0===e||e.update()}dispose(){this._kbInputController=null}_createGUITextureInstance(){const e=V.vs.CreateFullscreenUI("Player Character GUI Texture",!0,M.getInstance().currentSceneInstance);return X.initialize(e),e}_addElementToGUITexture(e){this._guiTexture.addControl(e)}_createMainNavBar(){this._mainNavbarInstance=new Ce({characterInstance:this.characterInstance}),this._addElementToGUITexture(this._mainNavbarInstance)}_createInventoryMainPanel(){this._inventoryMainPanelInstance=new ie({characterInstance:this.characterInstance}),this._inventoryMainPanelInstance.isVisible=!1,this._addElementToGUITexture(this._inventoryMainPanelInstance)}_createWarpMapsMainPanel(){this._warpMapsMainPanelInstance=new ge({characterInstance:this.characterInstance}),this._warpMapsMainPanelInstance.isVisible=!1,this._addElementToGUITexture(this._warpMapsMainPanelInstance)}_addToggleKeys(){this._addInventoryPanelToggleKey(),this._addWarpMapsPanelToggleKey()}_addInventoryPanelToggleKey(){var e;null===(e=this._kbInputController)||void 0===e||e.addToggleKey(H.V,{onSwitchON:()=>this._openInventoryPanel(),onSwitchOFF:()=>this._closeInventoryPanel()},"Inventory Panel")}_addWarpMapsPanelToggleKey(){var e;null===(e=this._kbInputController)||void 0===e||e.addToggleKey(H.M,{onSwitchON:()=>this._openWarpMapsPanel(),onSwitchOFF:()=>this._closeWarpMapsPanel()},"Warp Maps Panel")}_openInventoryPanel(){this._inventoryMainPanelInstance&&(this._isInventoryMainPanelOpen=!0,this._inventoryMainPanelInstance.isVisible=!0)}_closeInventoryPanel(){this._inventoryMainPanelInstance&&(this._isInventoryMainPanelOpen=!1,this._inventoryMainPanelInstance.isVisible=!1)}_openWarpMapsPanel(){this._warpMapsMainPanelInstance&&(this._isWarpMapsMainPanelOpen=!0,this._warpMapsMainPanelInstance.isVisible=!0)}_closeWarpMapsPanel(){this._warpMapsMainPanelInstance&&(this._isWarpMapsMainPanelOpen=!1,this._warpMapsMainPanelInstance.isVisible=!1)}},Ae=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","-","arrowup","arrowdown","arrowleft","arrowright","capslock","shift"," "],xe=class extends P{constructor(e){super(),this._inputMap={},this._toggleKeyStates={},this._toggleKeyCallbacks={},this._toggleKeyValues={},this._toggleDisplayNames={},this._toggleStatusDebugInspectorElement=null,this._keyActionStates={},this._keyActionCallbacks={},this._scene=e.scene,this._onKeyPressedCallback=this._onKeyPressedCallback.bind(this),this._setToggleStatusDebugInspector(),this._subscribeToKeyPressed()}isKeyPressed(e){return!!this._inputMap[e.toLowerCase()]}addToggleKey(e,t,s){const n=e.toLowerCase();this._toggleKeyCallbacks[n]=t,n in this._toggleKeyStates||(this._toggleKeyStates[n]=!1),n in this._toggleKeyValues||(this._toggleKeyValues[n]=!1),s&&(this._toggleDisplayNames[n]=s),this._renderToggleDebugStatus()}simulateToggleKeyPressed(e){this._onUpdateToggleLogic(e,!0),this._onUpdateToggleLogic(e,!1),this._renderToggleDebugStatus()}addKeyAction(e,t){const s=e.toLowerCase();this._keyActionCallbacks[s]=t,this._keyActionStates[s]=!1}removeToggleKey(e){const t=e.toLowerCase();delete this._toggleKeyCallbacks[t],delete this._toggleKeyStates[t],delete this._toggleKeyValues[t]}dispose(){this._keyboardObserver&&(this._scene.onKeyboardObservable.remove(this._keyboardObserver),this._keyboardObserver=void 0)}_setToggleStatusDebugInspector(){this._toggleStatusDebugInspectorElement=document.createElement("div"),this._toggleStatusDebugInspectorElement.id="toggle-debug-status",document.body.appendChild(this._toggleStatusDebugInspectorElement),this._renderToggleDebugStatus()}_subscribeToKeyPressed(){this._keyboardObserver=this._scene.onKeyboardObservable.add(this._onKeyPressedCallback)}_onKeyPressedCallback(e){console.table(this._toggleKeyStates);const t=e.event.key.toLowerCase(),s=e.type===v.TBB.KEYDOWN;this._onUpdateKeyPressedLogic(e,t,s),this._onUpdateToggleLogic(t,s),this._onUpdateKeyActionLogic(t,e),this._renderToggleDebugStatus()}_onUpdateKeyPressedLogic(e,t,s){Ae.includes(t)&&e.event.preventDefault(),this._inputMap[t]=s,console.log(`this._inputMap [Key: "${t}" Event: "${e.type===v.TBB.KEYDOWN?"KEYDOWN":"KEYUP"}"]`)}_onUpdateToggleLogic(e,t){if(this._toggleKeyCallbacks[e]){const s=this._toggleKeyStates[e];if(t&&!s){this._toggleKeyValues[e]=!this._toggleKeyValues[e];const t=this._toggleKeyCallbacks[e];this._toggleKeyValues[e]?t.onSwitchON():t.onSwitchOFF()}this._toggleKeyStates[e]=t}}_onUpdateKeyActionLogic(e,t){const s=t.type===v.TBB.KEYDOWN,n=t.type===v.TBB.KEYUP,i=this._keyActionCallbacks[e];if(!i)return;const a=t.event;s&&!a.repeat&&i.onKeyPressed&&i.onKeyPressed(),n&&i.onKeyReleased&&i.onKeyReleased(),this._keyActionStates[e]=s}_renderToggleDebugStatus(){if(!this._toggleStatusDebugInspectorElement)return;const e=Object.keys(this._toggleKeyValues).map((e=>{const t=this._toggleKeyValues[e],s=this._toggleDisplayNames[e]||e.toUpperCase();return`<div><span class="yellow-color">[${e.toUpperCase()}]</span> ${s}: ${t?'<span class="green-color">ON</span>':'<span class="red-color">OFF</span>'}</div>`}));this._toggleStatusDebugInspectorElement.innerHTML="<div><b>[DEBUG] Toggle Values</b></div>"+e.join("")}},fe={helm:"",armor:"",gloves:"",pants:"",boots:""},Ne={helm:null,armor:null,gloves:null,pants:null,boots:null};var Ee=function(e,t,s,n){return new(s||(s=Promise))((function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function r(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(o,r)}l((n=n.apply(e,t||[])).next())}))};const we=class extends x{constructor(e){super(e),this._animationsModelInstance=null,this._bodyPartsModelsPaths=Object.assign({},fe),this._bodyPartsModelsInstances=Object.assign({},Ne),this._defaultBodyPartsModelsPaths=Object.assign({},fe),this._defaultBodyPartsModelsInstances=Object.assign({},Ne),this._rootNode=null,this._emissiveTextures=[],this._materials=[],this._onMeshLoadedCallback=e.onMeshLoadedCallback,this._setAnimationsModelPath(),this._setDefaultBodyPartsModelsPaths(),this._setBodyPartsModelsPaths(),this._createAllModelsInstances().then((()=>{this._onMeshLoadedCallback&&this._onMeshLoadedCallback(),this._onMeshesLoaded()}))}dispose(){this._onMeshLoadedCallback=()=>{},this._rootNode=null,this._animationsModelPath="",this._animationsModelInstance=null,this._bodyPartsModelsPaths=Object.assign({},fe),this._bodyPartsModelsInstances=Object.assign({},Ne),this._defaultBodyPartsModelsPaths=Object.assign({},fe),this._defaultBodyPartsModelsInstances=Object.assign({},Ne)}_setAnimationsModelPath(){this._animationsModelPath="assets/models/character/character_animations_v1.glb"}_setDefaultBodyPartsModelsPaths(){this._defaultBodyPartsModelsPaths.helm="assets/models/class-warrior_helm_v1.gltf",this._defaultBodyPartsModelsPaths.armor="assets/models/class-warrior_armor_v1.gltf",this._defaultBodyPartsModelsPaths.gloves="assets/models/class-warrior_gloves_v1.gltf",this._defaultBodyPartsModelsPaths.pants="assets/models/class-warrior_pants_v1.gltf",this._defaultBodyPartsModelsPaths.boots="assets/models/class-warrior_boots_v1.gltf"}_setBodyPartsModelsPaths(){this._bodyPartsModelsPaths.helm="assets/models/leather_helm_v1.gltf",this._bodyPartsModelsPaths.armor="assets/models/leather_armor_v1.gltf",this._bodyPartsModelsPaths.gloves="assets/models/leather_gloves_v1.gltf",this._bodyPartsModelsPaths.pants="assets/models/leather_pants_v1.gltf",this._bodyPartsModelsPaths.boots="assets/models/leather_boots_v1.gltf"}_createAllModelsInstances(){return Ee(this,void 0,void 0,(function*(){const e=M.getInstance().currentSceneInstance;e&&(yield this._createAnimationsModelInstance(e),yield this._createDefaultBodyPartsModelsInstances(e),yield this._createBodyPartsModelsInstances(e))}))}_createAnimationsModelInstance(e){return Ee(this,void 0,void 0,(function*(){var t;this._animationsModelInstance=yield(0,v.TkY)(this._animationsModelPath,e),this._rootNode=null===(t=this._animationsModelInstance)||void 0===t?void 0:t.meshes[0]}))}_createDefaultBodyPartsModelsInstances(e){return Ee(this,void 0,void 0,(function*(){this._defaultBodyPartsModelsInstances.helm=yield(0,v.TkY)(this._defaultBodyPartsModelsPaths.helm,e),this._defaultBodyPartsModelsInstances.armor=yield(0,v.TkY)(this._defaultBodyPartsModelsPaths.armor,e),this._defaultBodyPartsModelsInstances.gloves=yield(0,v.TkY)(this._defaultBodyPartsModelsPaths.gloves,e),this._defaultBodyPartsModelsInstances.pants=yield(0,v.TkY)(this._defaultBodyPartsModelsPaths.pants,e),this._defaultBodyPartsModelsInstances.boots=yield(0,v.TkY)(this._defaultBodyPartsModelsPaths.boots,e)}))}_createBodyPartsModelsInstances(e){return Ee(this,void 0,void 0,(function*(){var t,s,n,i,a,o,r,l,c,d;this._bodyPartsModelsInstances.helm=yield(0,v.TkY)(this._bodyPartsModelsPaths.helm,e),null===(s=null===(t=this._bodyPartsModelsInstances.helm)||void 0===t?void 0:t.meshes.find((e=>"__root__"===e.id)))||void 0===s||s.setEnabled(!1),this._bodyPartsModelsInstances.armor=yield(0,v.TkY)(this._bodyPartsModelsPaths.armor,e),null===(i=null===(n=this._bodyPartsModelsInstances.armor)||void 0===n?void 0:n.meshes.find((e=>"__root__"===e.id)))||void 0===i||i.setEnabled(!1),this._bodyPartsModelsInstances.gloves=yield(0,v.TkY)(this._bodyPartsModelsPaths.gloves,e),null===(o=null===(a=this._bodyPartsModelsInstances.gloves)||void 0===a?void 0:a.meshes.find((e=>"__root__"===e.id)))||void 0===o||o.setEnabled(!1),this._bodyPartsModelsInstances.pants=yield(0,v.TkY)(this._bodyPartsModelsPaths.pants,e),null===(l=null===(r=this._bodyPartsModelsInstances.pants)||void 0===r?void 0:r.meshes.find((e=>"__root__"===e.id)))||void 0===l||l.setEnabled(!1),this._bodyPartsModelsInstances.boots=yield(0,v.TkY)(this._bodyPartsModelsPaths.boots,e),null===(d=null===(c=this._bodyPartsModelsInstances.boots)||void 0===c?void 0:c.meshes.find((e=>"__root__"===e.id)))||void 0===d||d.setEnabled(!1)}))}_onMeshesLoaded(){var e,t,s,n,i;this._attachBodyPartsModelsToAnimationsModel(),this._copyAnimationsForEachBodyPartModel(),this._setKeysToToggleLeatherTest(),this._applyExcellentEffect(null===(e=this._bodyPartsModelsInstances.helm)||void 0===e?void 0:e.meshes),this._applyExcellentEffect(null===(t=this._bodyPartsModelsInstances.armor)||void 0===t?void 0:t.meshes),this._applyExcellentEffect(null===(s=this._bodyPartsModelsInstances.gloves)||void 0===s?void 0:s.meshes),this._applyExcellentEffect(null===(n=this._bodyPartsModelsInstances.pants)||void 0===n?void 0:n.meshes),this._applyExcellentEffect(null===(i=this._bodyPartsModelsInstances.boots)||void 0===i?void 0:i.meshes)}_attachBodyPartsModelsToAnimationsModel(){var e,t,s,n,i,a,o,r,l,c;this._rootNode&&(null===(e=this._defaultBodyPartsModelsInstances.helm)||void 0===e||e.meshes[0].setParent(this._rootNode),null===(t=this._defaultBodyPartsModelsInstances.armor)||void 0===t||t.meshes[0].setParent(this._rootNode),null===(s=this._defaultBodyPartsModelsInstances.gloves)||void 0===s||s.meshes[0].setParent(this._rootNode),null===(n=this._defaultBodyPartsModelsInstances.pants)||void 0===n||n.meshes[0].setParent(this._rootNode),null===(i=this._defaultBodyPartsModelsInstances.boots)||void 0===i||i.meshes[0].setParent(this._rootNode),null===(a=this._bodyPartsModelsInstances.helm)||void 0===a||a.meshes[0].setParent(this._rootNode),null===(o=this._bodyPartsModelsInstances.armor)||void 0===o||o.meshes[0].setParent(this._rootNode),null===(r=this._bodyPartsModelsInstances.gloves)||void 0===r||r.meshes[0].setParent(this._rootNode),null===(l=this._bodyPartsModelsInstances.pants)||void 0===l||l.meshes[0].setParent(this._rootNode),null===(c=this._bodyPartsModelsInstances.boots)||void 0===c||c.meshes[0].setParent(this._rootNode))}_copyAnimationsForEachBodyPartModel(){return Ee(this,void 0,void 0,(function*(){var e;const t=M.getInstance().currentSceneInstance;null===(e=this._animationsModelInstance)||void 0===e||e.animationGroups.forEach((e=>{const s=new v.klW(e.name,t);Object.values(this._defaultBodyPartsModelsInstances).forEach((t=>{if(t){const n={};[...t.meshes,...t.transformNodes].forEach((e=>{n[e.name]=e}));for(const t of e.targetedAnimations){const e=t.target,i=n[e.name];if(i){const e=t.animation.clone();s.addTargetedAnimation(e,i)}}t.animationGroups.push(s)}})),Object.values(this._bodyPartsModelsInstances).forEach((t=>{if(t){const n={};[...t.meshes,...t.transformNodes].forEach((e=>{n[e.name]=e}));for(const t of e.targetedAnimations){const e=t.target,i=n[e.name];if(i){const e=t.animation.clone();s.addTargetedAnimation(e,i)}}t.animationGroups.push(s)}}))}))}))}get rootNode(){return this._rootNode}get rootModel(){return this._animationsModelInstance}get bodyPartsModels(){return this._defaultBodyPartsModelsInstances}_toggleHelmModel(e){var t,s;const n=this._defaultBodyPartsModelsInstances.helm,i=this._bodyPartsModelsInstances.helm;i&&n&&(null===(t=i.meshes.find((e=>"__root__"===e.id)))||void 0===t||t.setEnabled(e),null===(s=n.meshes.find((e=>"__root__"===e.id)))||void 0===s||s.setEnabled(!e))}_toggleArmorModel(e){var t,s;const n=this._defaultBodyPartsModelsInstances.armor,i=this._bodyPartsModelsInstances.armor;i&&n&&(null===(t=i.meshes.find((e=>"__root__"===e.id)))||void 0===t||t.setEnabled(e),null===(s=n.meshes.find((e=>"__root__"===e.id)))||void 0===s||s.setEnabled(!e))}_toggleGlovesModel(e){var t,s;const n=this._defaultBodyPartsModelsInstances.gloves,i=this._bodyPartsModelsInstances.gloves;i&&n&&(null===(t=i.meshes.find((e=>"__root__"===e.id)))||void 0===t||t.setEnabled(e),null===(s=n.meshes.find((e=>"__root__"===e.id)))||void 0===s||s.setEnabled(!e))}_togglePantsModel(e){var t,s;const n=this._defaultBodyPartsModelsInstances.pants,i=this._bodyPartsModelsInstances.pants;i&&n&&(null===(t=i.meshes.find((e=>"__root__"===e.id)))||void 0===t||t.setEnabled(e),null===(s=n.meshes.find((e=>"__root__"===e.id)))||void 0===s||s.setEnabled(!e))}_toggleBootsModel(e){var t,s;const n=this._defaultBodyPartsModelsInstances.boots,i=this._bodyPartsModelsInstances.boots;i&&n&&(null===(t=i.meshes.find((e=>"__root__"===e.id)))||void 0===t||t.setEnabled(e),null===(s=n.meshes.find((e=>"__root__"===e.id)))||void 0===s||s.setEnabled(!e))}_applyExcellentEffect(e){if(e)for(const t of e){const e=t.material;if(!e||"hide.jpg"===e.id||"hide_m.jpg"===e.id||"texture_class-warrior_v1.jpg"===e.id)continue;const s=new v.gPd("assets/textures/gradiente_256x256_3.png",t.getScene());e.emissiveTexture=s,e.emissiveColor=new v.v9j(.175,.175,.175),e.emissiveIntensity=-.2,s.uScale=.2,s.vScale=.2,t.getScene().onBeforeRenderObservable.add((()=>{s.uOffset+=.005,s.vOffset+=.005,s.wAng+=.02})),this._emissiveTextures.push(s),this._materials.push(e)}}_setKeysToToggleLeatherTest(){var e,t,s,n,i;null===(e=this._characterInstance.keyboardInputController)||void 0===e||e.addToggleKey(H.ONE,{onSwitchON:()=>{this._toggleHelmModel(!0)},onSwitchOFF:()=>{this._toggleHelmModel(!1)}},"Leather Helm"),null===(t=this._characterInstance.keyboardInputController)||void 0===t||t.addToggleKey(H.TWO,{onSwitchON:()=>{this._toggleArmorModel(!0)},onSwitchOFF:()=>{this._toggleArmorModel(!1)}},"Leather Armor"),null===(s=this._characterInstance.keyboardInputController)||void 0===s||s.addToggleKey(H.THREE,{onSwitchON:()=>{this._toggleGlovesModel(!0)},onSwitchOFF:()=>{this._toggleGlovesModel(!1)}},"Leather Gloves"),null===(n=this._characterInstance.keyboardInputController)||void 0===n||n.addToggleKey(H.FOUR,{onSwitchON:()=>{this._togglePantsModel(!0)},onSwitchOFF:()=>{this._togglePantsModel(!1)}},"Leather Pants"),null===(i=this._characterInstance.keyboardInputController)||void 0===i||i.addToggleKey(H.FIVE,{onSwitchON:()=>{this._toggleBootsModel(!0)},onSwitchOFF:()=>{this._toggleBootsModel(!1)}},"Leather Boots")}};class Re{static _getEntityId(){return Re._instancesCounter++,Re._instancesCounter.toString()}constructor(){this._id=Re._getEntityId()}get id(){return this._id}}Re._instancesCounter=0;const Oe=Re,ke=class extends Oe{constructor(e){super(),this._name=e.characterName,this._currentHP=e.currentHP,this._maxHP=e.maxHP,this._currentMP=e.currentMP,this._maxMP=e.maxMP,this._characterModelsControllerInstance=new we({characterInstance:this,onMeshLoadedCallback:this._onMeshLoaded.bind(this)})}addHP(e){if(isNaN(e)||e<0)throw new Error(`Invalid HP points to add | pointsToAdd: ${e}`);const t=this._currentHP+e;this._currentHP=t<=this._maxHP?t:this._maxHP}decreaseHP(e){if(isNaN(e)||e<0)throw new Error(`Invalid HP points to decrease | pointsToDecrease: ${e}`);const t=this._currentHP-e;t>0?this._currentHP=t:(this._currentHP=0,this._die())}addMP(e){if(isNaN(e)||e<0)throw new Error(`Invalid MP points to add | pointsToAdd: ${e}`);const t=this._currentMP+e;this._currentMP=t<=this._maxMP?t:this._maxMP}decreaseMP(e){if(isNaN(e)||e<0)throw new Error(`Invalid MP points to decrease | pointsToDecrease: ${e}`);const t=this._currentMP-e;this._currentMP=t>0?t:0}_die(){console.log(`${this._name} just died...`)}_playDeathAnimation(){console.log("_playDeathAnimation execution")}get name(){return this._name}get characterModelsController(){return this._characterModelsControllerInstance}get rootModel(){var e;return null===(e=this._characterModelsControllerInstance)||void 0===e?void 0:e.rootModel}get rootNode(){var e;return null===(e=this._characterModelsControllerInstance)||void 0===e?void 0:e.rootNode}get currentHP(){return this._currentHP}get maxHP(){return this._maxHP}get currentMP(){return this._currentMP}get maxMP(){return this._maxMP}};class Se extends v.Lqh{constructor(e){super("FollowPlayerCamera",-Math.PI/2,1.2,10,e.playerMesh.position.clone(),e.scene),this._movementActive=!0,this._minZoom=3,this._maxZoom=15,this._minY=1,this._maxY=1.2,this._targetRadius=10,this._zoomSmoothSpeed=.15,this._clickToMoveCamera=0,this._pointerObserver=null,this._isRotating=!1,this._lastPointerX=0,this._lastPointerY=0,this._playerMesh=e.playerMesh,this._targetRadius=this.radius,this._configureCamera(),this._createFakeTargetToFollow(),this._setupPointerControls(),this._addDebugButtons()}update(){this.radius=v.X5X.Lerp(this.radius,this._targetRadius,this._zoomSmoothSpeed)}dispose(){this._pointerObserver&&this.getScene().onPointerObservable.remove(this._pointerObserver),super.dispose()}turnOffMovementControls(){this._movementActive=!1}turnOnMovementControls(){this._movementActive=!0}_configureCamera(){this.inputs.clear(),this.allowUpsideDown=!1,this.lowerRadiusLimit=this._minZoom,this.upperRadiusLimit=this._maxZoom,this.lowerBetaLimit=this._minY,this.upperBetaLimit=this._maxY}_createFakeTargetToFollow(){this._fakeTarget=new v.VR0("cameraTarget"),this._fakeTarget.parent=this._playerMesh,this._fakeTarget.position.y=1,this.setTarget(this._fakeTarget)}_setupPointerControls(){this._pointerObserver=this._scene.onPointerObservable.add((e=>{if(!this._movementActive)return;const t=e.event;switch(e.type){case v.Zph.POINTERDOWN:t.button===this._clickToMoveCamera&&(this._isRotating=!0,this._lastPointerX=t.clientX,this._lastPointerY=t.clientY);break;case v.Zph.POINTERUP:t.button===this._clickToMoveCamera&&(this._isRotating=!1);break;case v.Zph.POINTERMOVE:if(this._isRotating){const e=t.clientX-this._lastPointerX,s=t.clientY-this._lastPointerY;this.alpha-=.005*e,this.beta-=.005*s,this.beta=v.X5X.Clamp(this.beta,this._minY,this._maxY),this._lastPointerX=t.clientX,this._lastPointerY=t.clientY}break;case v.Zph.POINTERWHEEL:{const e=t,s=v.X5X.Clamp(.01*e.deltaY,-1,1);this._targetRadius=v.X5X.Clamp(this._targetRadius+s,this._minZoom,this._maxZoom);break}}}))}_addDebugButtons(){}}const Le=Se,Ke=class extends ke{constructor(e){super(e),this._kbInputController=null,this._guiController=null,this._movementController=null,this._animationController=null,this._inventoryController=null,this._level=10,this._walkSpeed=.08,this._walkAcceleration=.1,this._runSpeed=.16,this._runAcceleration=.1}update(){var e,t,s,n;const i=M.getInstance().currentSceneInstance;null===(e=this._movementController)||void 0===e||e.update(),null===(t=null==i?void 0:i.activeCamera)||void 0===t||t.update(),null===(s=this._animationController)||void 0===s||s.update(),null===(n=this._guiController)||void 0===n||n.update()}_onMeshLoaded(){this._createPlayerCamera(),this._createKbInputController(),this._createMovementController(),this._createAnimationsController(),this._createInventoryController(),this._createUiController()}_createPlayerCamera(){const e=M.getInstance().currentSceneInstance;this.rootNode&&(null==e||e.setActiveCamera(new Le({scene:e,playerMesh:this.rootNode})))}_createKbInputController(){const e=M.getInstance().currentSceneInstance;e&&(this._kbInputController=new xe({scene:e}))}_createMovementController(){this._movementController=new q({characterInstance:this})}_createAnimationsController(){this._animationController=new k({characterInstance:this})}_createInventoryController(){this._inventoryController=new D({characterInstance:this})}_createUiController(){this._guiController=new ye({characterInstance:this})}addGlow(){var e;null===(e=M.getInstance().currentSceneInstance)||void 0===e||e.meshes.forEach((e=>{e&&"texture_class-warrior_v1.jpg"===e.id&&e.material&&e.material instanceof v.YOq&&(e.material.emissiveTexture=e.material.albedoTexture,e.material.emissiveColor=new v.v9j(1,.8,.2).scale(.75))}))}removeGlow(){const e=M.getInstance().currentSceneInstance;e&&e.meshes.forEach((e=>{e&&"texture_class-warrior_v1.jpg"===e.id&&e.material&&e.material instanceof v.YOq&&(e.material.emissiveTexture=null,e.material.emissiveColor=v.v9j.Black())}))}get keyboardInputController(){return this._kbInputController}get movementController(){return this._movementController}get level(){return this._level}get walkSpeed(){return this._walkSpeed}get walkAcceleration(){return this._walkAcceleration}get runSpeed(){return this._runSpeed}get runAcceleration(){return this._runAcceleration}},De=class extends ue{constructor(){super({sceneName:A.TEST_MAP}),this._playerCharacter=null}preload(){console.log('GrassMapScene.ts | "preload" method execution'),this._createTempCamera()}loaded(){console.log('GrassMapScene.ts | "loaded" method execution'),this._createGrassMapSceneContent()}update(){var e;null===(e=this._playerCharacter)||void 0===e||e.update()}_createGrassMapSceneContent(){new v.g4z("light",new v.Pq0(0,1,0),this);const e=v.PeD.CreateGround("ground",{width:600,height:600},this),t=new v.FUi("groundMat",this);t.diffuseTexture=new v.gPd("assets/textures/grass.png",this),t.diffuseTexture.uScale=150,t.diffuseTexture.vScale=150,e.material=t,this._playerCharacter=new Ke({characterName:"KriZ",currentHP:75e4,maxHP:999999,currentMP:85e4,maxMP:999999})}_createTempCamera(){const e=new v.SCQ("tempCamera",new v.Pq0(0,5,-10),this);e.setTarget(v.Pq0.Zero()),this.setActiveCamera(e)}},Be=class extends C{constructor(){super({sceneName:A.LOGIN})}preload(){console.log('LoginScene.ts | "preload" method execution'),this._createLoginSceneContent()}loaded(){console.log('LoginScene.ts | "loaded" method execution')}update(){}_createLoginSceneContent(){const e=qe.getInstance().canvasElement,t=new v.Lqh("camera",0,0,10,v.Pq0.Zero(),this);t.setPosition(new v.Pq0(0,10,0)),t.target=v.Pq0.Zero(),t.lowerBetaLimit=0,t.upperBetaLimit=0,t.attachControl(e,!0),new v.g4z("light",new v.Pq0(0,1,0),this);const s=v.PeD.CreateGround("ground",{width:6,height:3},this);s.rotation.y=Math.PI;const n=new v.RCS("dynamic texture",{width:1024,height:512},this,!1);n.hasAlpha=!1;const i=n.getContext();i.fillStyle="#696969",i.fillRect(0,0,1024,512),n.drawText("Click here to start",null,256,"bold 110px Arial","black","#f8f8ff",!0);const a=new v.FUi("textMat",this);a.diffuseTexture=n,a.backFaceCulling=!1,a.specularColor=new v.v9j(0,0,0),s.material=a,this.onPointerObservable.add((e=>{var t;e.type===v.Zph.POINTERDOWN&&(null===(t=null==e?void 0:e.pickInfo)||void 0===t?void 0:t.hit)&&e.pickInfo.pickedMesh===s&&M.getInstance().switchToScene(new De)}))}},Ge=class extends C{constructor(){super({sceneName:A.LOADING})}preload(){console.log('LoadingScene.ts | "preload" method execution');const e=qe.getInstance().canvasElement,t=new v.Lqh("camera",0,0,10,v.Pq0.Zero(),this);t.setPosition(new v.Pq0(0,10,0)),t.target=v.Pq0.Zero(),t.lowerBetaLimit=0,t.upperBetaLimit=0,t.attachControl(e,!0),new v.g4z("light",new v.Pq0(0,1,0),this);const s=v.PeD.CreateGround("ground",{width:6,height:3},this);s.rotation.y=Math.PI;const n=new v.RCS("dynamic texture",{width:1e3,height:200},this,!1);n.hasAlpha=!1;const i=n.getContext();i.fillStyle="#696969",i.fillRect(0,0,1e3,200),n.drawText("Loading resources...",null,100,"bold 90px Arial","black","#f8f8ff",!0);const a=new v.FUi("textMat",this);a.diffuseTexture=n,a.backFaceCulling=!1,a.specularColor=new v.v9j(0,0,0),s.material=a}loaded(){console.log('LoadingScene.ts | "loaded" method execution'),this._switchToLoginScene()}update(){}_switchToLoginScene(){M.getInstance().switchToScene(new Be)}};class He extends P{constructor(){super(),this._gameStarted=!1,this._canvasElement=this._getCanvasHtmlElement(),this._fixCanvasSizeForDevelopmentMode(),this._engine=this._createEngineInstance(),this._addBrowserResizeHandler(),this._addRunRenderLoop()}static getInstance(){return void 0===He._instance&&(He._instance=new He),He._instance}startGame(){this._gameStarted?console.log("Game already started"):(console.log("Game started"),M.getInstance().switchToScene(new Ge),this._gameStarted=!0)}dispose(){M.getInstance().dispose(),this._engine.dispose()}_getCanvasHtmlElement(){return document.getElementById("renderCanvas")}_createEngineInstance(){return new v.N$8(this._canvasElement,!0)}_addBrowserResizeHandler(){window.addEventListener("resize",(()=>{this._engine.resize()}))}_addRunRenderLoop(){this._engine.runRenderLoop((()=>{const e=M.getInstance().currentSceneInstance;e&&!e.isDisposed&&(e.update(),e.render())}))}_fixCanvasSizeForDevelopmentMode(){}get canvasElement(){return this._canvasElement}get engine(){return this._engine}}const qe=He;qe.getInstance().startGame()}},s={};function n(e){var i=s[e];if(void 0!==i)return i.exports;var a=s[e]={id:e,exports:{}};return t[e](a,a.exports,n),a.exports}n.m=t,e=[],n.O=(t,s,i,a)=>{if(!s){var o=1/0;for(d=0;d<e.length;d++){for(var[s,i,a]=e[d],r=!0,l=0;l<s.length;l++)(!1&a||o>=a)&&Object.keys(n.O).every((e=>n.O[e](s[l])))?s.splice(l--,1):(r=!1,a<o&&(o=a));if(r){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,i,a]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};n.O.j=t=>0===e[t];var t=(t,s)=>{var i,a,[o,r,l]=s,c=0;if(o.some((t=>0!==e[t]))){for(i in r)n.o(r,i)&&(n.m[i]=r[i]);if(l)var d=l(n)}for(t&&t(s);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},s=self.webpackChunkbabylon_mmorpg_client=self.webpackChunkbabylon_mmorpg_client||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})(),n.nc=void 0;var i=n.O(void 0,[127],(()=>n(62596)));i=n.O(i)})();